<?xml version="1.0"?>

<document>

 <properties>
  <title>ChangeLog</title>
  <author email="sergek@lokitech.com">Serge Knystautas</author>
 </properties>

<body>

<p>This is a living document that records what was done between releases.  As always, thank you to everyone who contributed code, documentation, bug reports, and feedback.
</p>
<section name="Version 2.0a2">
<p>Released 1 December 2001</p>
<ul>
<li>(DA) (update) Fixed POP3 message size bug that prevented retrieval</li>
<li>(SK) (code) Added Mordred database connection pooling.  It is the marriage of Town's db pooling code and Excalibur's configuration.</li>
<li>(SK) (update) Changed MailImpl.getSize() to getMessageSize() and from int to long.</li>
<li>(SK) (docs) Small updates to documentation</li>
<li>(SK) (code) Added JDBCListserv, straight JDBC implementation of old TownListserv that extends GenericListserv</li>
<li>(SK) (update) Patched bug in GenericListserv for when subject was null</li>
<li>(SK) (update) Got mailets/matchers to load from something besides james.bar</li>
<li>(SK) (code) Added scheduler notification during SMTP DATA reception and POP3 RETR sending so the connection handler doesn't time out connection while data is being transfered.</li>
<li>(SK) (code) Support &lt;gatewayPort&gt; setting on RemoteDelivery to send all messages to a non-port 25 SMTP server.  Only makes sense when &lt;gateway&gt; is also set.</li>
</ul>
</section>

<section name="Version 2.0a1">
<p>Released 26 October 2001</p>
<ul>
<li>(CB,*) (update) Moved to Avalon snapshot of 9-25-2001.</li>
<li>(HB) (code) Added NNTP service.</li>
<li>(SK) (update) Greatly improved multi-threading support for repositories and SMTP reception.</li>
<li>(JB) (code) SMTP AUTH support</li>
<li>(SK) (update) Support null senders, i.e., MAIL RCPT: &lt;&gt;.</li>
<li>(DD,SK) (update) Converted Town mail and user repositories to straight JDBC ones, using Excalibur connection pooling and configurable SQL statements per DB.</li>
<li>(SK) (update) Messages are no longer loaded until absolutely necessary.</li>
<li>(GB) (update) Fixed exception being thrown on MailAddress parsing.</li>
<li>(CB) (update) Rebuilt CVS tree after hack and moved src to src/java.</li>
<li>(DA) (code) New extensible, flexible Redirect mailet that handles notifications and forwarding.</li>
<li>(SK) (code) JDBC Alias mailet.</li>
<li>(various) (docs) Added a whole bunch of related RFCs to the webdocs.</li>
<li>(DA) (update) Add date to bounced emails.</li>
<li>(HB) (update) Updated DNS library and started process to move it to Avalon service.</li>
<li>(various) (update) More checks to fix "stuck file" problem in Avalon mail repository.</li>
<li>(MP) (code) Limit the size of a message on reception (rather than waiting until processors).</li>
<li>(SK) (update) Fixed dot-stuffing in SMTP reception/delivery.</li>
<li>(SK) (update) Improved how Return-Path and Received headers are generated during SMTP reception.</li>
<li>(SK) (update) More efficient remote delivery code, better error messages, and gateway parameter to route all messages to a single target.</li>
<li>(DA) (update) Fixed timezone bug in RFC822DateFormat</li>
<li>(MP) (update) Patch to support username@[yyy.yyy.yyy.yyy] addresses</li>
<li>(GB) (update) Patch to fix size calculation from headers</li>
<li>(RS) (image) Contributed James logo</li>
<li>(SK) (update) Changed MailetException to extend MessagingException, and Mailet.init() throws MailetException.</li>
</ul>
</section>

<section name="Version 1.2.1">
<p>Released 13 December 2000</p>
<ul>
<li>(SK,SR,CB) (update) Fix for "stuck file" problem in Avalon mail repository.</li>
<li>(SK) (design) Made usernames case insensitive on MailAddress</li>
<li>(SK) (code) Complete rewrite of processor code to send through Mail object through matchers and mailets.  Design might be less efficient but easier to understand and more flexible for later improvements to API.  Also no longer "loses" IP address and error message information when Mail object go from one processor/state to the next (ToProcessor changed as well now that processor works).</li>
<li>(SK) (update) Updated to JavaMail 1.2</li>
<li>(SK) (update) Changed instantiation of recipients on a Mail object to a Set (HashSet) whenever possible in preparation for the API having this change.</li>
<li>(IS) (code) Added UsersTownRepository to let you maintain user lists in a database</li>
<li>(SR) (update) In POP3 handler, properly includes headers in calculating size of messages.</li>
<li>(SK) (update) Removed "synchronized" attribute on many methods in town and file spool repositories.  Should significantly boost performance and multithreaded capabilities.</li>
<li>(SK) (code) Optimization of town mail repository, introduction of JamesMimeMessageInputStream and the James MimeMessage.  Should significantly reduce the number of unnecessary parses or saves on MimeMessages in server.</li>
<li>(SR) (update) Properly calculates hashCode for MailAddress so duplicates do not exist in Hashmaps</li>
<li>(SR) (update) Hardcoded serialVerUID on MailAddress and MailImpl to that of James 1.2 release so future releases can continue to use mail stored in earlier releases.</li>
<li>(IS) (update) Added ability on NotifySender and NotifyPostmaster to attach informative notice.</li>
<li>(SK) (update) GenericListservManager now requires existsAddress() which it uses to prevent someone already on the list from subscribing or someone not on the list from removing themselves.</li>
<li>(SK) (update) Changed User repository for file to *always* end the destination with a File.separator.  Otherwise if people mixed usage of this, it would crash the repositories with confusing error messages.  Child repositories were already properly created with a terminating File.separator.</li>
<li>(SK) (code) New matcher: IsSingleRecipient</li>
<li>(SK) (code) Added spam blacklist checking for 3 spam blacklists that make this available in a simple DNS lookup check.  All free services through mail-abuse.org.  Added to default configuration in JAMES.conf.xml</li>
<li>(PU) (code) Added first testing program.  This would recreate file stuck problem.  Would be good to build collection of testing utilities in this new package.</li>
<li>(SK) (docs) Documented what all the jars are in the lib directory (what they're called, where they're from)</li>
</ul>
</section>

<section name="Version 1.2">
<p>Released 16 October 2000</p>
<ul>
<li>(SK) (design) Abstracted mailet API to be Avalon (implementation) independent</li>
<li>(CB) (code) Abstracted mail repository in JAMES/Avalon to allow more varied implementations.</li>
<li>(SK) (code) Database implementations of mail repositories</li>
<li>(SK) (code) Changed remote delivery to use an outgoing spool with a specified number of delivery threads</li>
<li>(CB) (code) Experimental implementation of LDAP user manager</li>
<li>(SK) (update) Reworked mailets and matchers to fit new API and added many more classes</li>
<li>(CB, SK) (update) Fixed some bugs in POP3 server</li>
<li>(CB) (update) Added full TLS support in POP3 (POP3S)</li>
<li>(SK) (update) Fixed sorting of MX records so it attempts delivery in correct order</li>
<li>(SK) (update) Changed remote manager to not allow a login if an admin account's password is empty,
    and sets the root account's password empty by default (so you have to set one... prevents someone
    from knowing the password to your system out of the box)</li>
</ul>
</section>
<section name="Version 1.1">
<p>Release 27 July 2000</p>
<ul>
<li>(??) (code) Unknown changes</li>
<li>(SK) (code) Made DNS functionality a separate block</li>
</ul>
</section>

<section name="Version 1.0">
<p>Released 26 February 2000</p>
<ul>
<li>(SK, FB) (code) Added DNS stuff to remote delivery.</li>
<li>(FB) (code) Add some autodetect support for easier configuration.</li>
<li>(FB) (code) Add support for Mailet.</li>
<li>(FB) (update) Add Mailet interface draft.</li>
</ul>
</section>

<section name="Version 0.9.5">
<p>Released early 2000</p>
<ul>
<li>(FB) (update) Split the SMTP Server in a protocol handler and a MailServer available to
    all Avalon blocks.</li>
<li>(FB) (update) Tune MessageContainer class.</li>
</ul>
</section>

<section name="Version 0.9-dev">
<p>Unknown release date</p>
<ul>
<li>(FB) (update) Based on much code from Serge Knystautas first implementation of JAMES on
  	top of the Avalon framework.</li>
</ul>
</section>

<section name="Contributors">
<p>Special thanks go to the following people for their contribution to this project.</p>
<ul>
<li>Federico Barbieri, scoobie at systemy.it (FB)</li>
<li>Serge Knystautas, sergek at lokitech.com (SK)</li>
<li>Charles Benett, charles at benett1.demon.co.uk (CB)</li>
<li>Stuart Roebuck, stuart.roebuck at adolos.co.uk (SR)</li>
<li>Ivan Seskar, iseskar at upsideweb.com (IS)</li>
<li>Prasanna Uppaladadium, prasanna at vayusphere.com (PU)</li>
<li>Gabriel Bucher, gabriel.bucher at razor.ch (GB)</li>
<li>Danny Angus, danny at thought.co.uk (DA)</li>
<li>Darrell DeBoer, ? (DD)</li>
<li>Harmeet Bedi, harmeet at kodemuse.com (HB)</li>
<li>Matthew Pangaro, mattp at lokitech.com (MP)</li>
<li>Jason Borden, jborden at javasense.com (JB)</li>
<li>Randy Stanard, rstanard at lokitech.com (RS)</li>
</ul>
<p>We also appreciate always documentation, feedback, and bug reports!</p>
</section>
</body>
</document>

